{% extends "layouts/base.html" %}

{% block title %} User Profile {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  <div class="content">
    <div class="row">
      <div class="col-md-4">
        <div class="card card-user">
          <div class="image">
            <img src="/static/assets/img/damir-bosnjak.jpg" alt="...">
          </div>
          <div class="card-body">
            <div class="author">
              <a href="#">
                <img class="avatar border-gray" src="/static/assets/img/mike.jpg" alt="...">
                <h5 class="title">Chet Faker</h5>
              </a>
              <p class="description">
                @student
              </p>
            </div>
            <p class="description text-center">
              "I like the way you work it <br>
              No diggity <br>
              I wanna bag it up"
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card card-user">
          <div class="card-header">
            <h5 class="card-title">Edit Profile</h5>
          </div>
          <div class="card-body">
            <form action="javascript:void(0);" id="userdataForm">
              <div class="row">
                <div class="col-md-6 pr-1">
                  <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" name="Prenom" placeholder="Company" value="Chet">
                  </div>
                </div>
                <div class="col-md-6 pl-1">
                  <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" name="Nom" placeholder="Last Name" value="Faker">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label>Adresse</label>
                    <input type="text" class="form-control" name="Adresse" placeholder="City" value="Melbourne">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label>Birthday</label>
                    <input type="date" class="form-control" name="Birthday">
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="update ml-auto mr-auto">
                  <button type="button" onclick= "updateUser()" class="btn btn-primary btn-round">Update Profile</button>
                </div>
              </div>
            </form>
            <form>
              <div class="row">
                <div class="col-md-4 pr-1">
                  <div class="form-group">
                    <label>Skill 1</label>
                   <select  class="form-control"  id="Skills">
                          <option value="client 1">Python</option>
                          <option value="client 2">SQL</option>
                          <option value="client 3">Java</option>
                          <option value="client 4">Management</option>
                       </select>
                  </div>
                </div>
                <div class="col-md-4 pr-1">
                  <div class="form-group">
                    <label>Skill 2</label>
                   <select  class="form-control"  id="Skills">
                          <option value="client 1">Python</option>
                          <option value="client 2">SQL</option>
                          <option value="client 3">Java</option>
                          <option value="client 4">Management</option>
                       </select>
                  </div>
                </div>
                <div class="col-md-4 pr-1">
                  <div class="form-group">
                    <label>Skill 3</label>
                   <select class="form-control"  id="Skills">
                          <option value="client 1">Python</option>
                          <option value="client 2">SQL</option>
                          <option value="client 3">Java</option>
                          <option value="client 4">Management</option>
                       </select>
                  </div>
                </div>
                 <div class="col-md-4 pr-1">
                  <div class="form-group">
                    <label>Skill 4</label>
                   <select  class="form-control"  id="Skills">
                          <option value="client 1">Python</option>
                          <option value="client 2">SQL</option>
                          <option value="client 3">Java</option>
                          <option value="client 4">Management</option>
                       </select>
                  </div>
                </div>
                 <div class="col-md-4 pr-1">
                  <div class="form-group">
                    <label>Skill 5</label>
                   <select name="Skills" class="form-control"  id="Skills">
                          <option value="client 1">Python</option>
                          <option value="client 2">SQL</option>
                          <option value="client 3">Java</option>
                          <option value="client 4">Management</option>
                       </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="update ml-auto mr-auto">
                  <button type="button" onclick= "" class="btn btn-primary btn-round">Update Skills</button>
                </div>
              </div>
            </form>
              
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}

{% block javascripts %}
<!-- Specific Page JS goes HERE  -->
<script type="text/javascript">
  function getFormData($form){
        var unindexed_array = $form.serializeArray();
        var indexed_array = {};

        $.map(unindexed_array, function(n, i){
            indexed_array[n['name']] = n['value'];
        });

        return indexed_array;
    }

var updateUser = function(){
 
 var req = new XMLHttpRequest();
  req.onload = function(){
  alert(this.response);
  }
  req.open("PUT","/user/{{current_user.IdU}}");
  req.setRequestHeader('Content-Type',"application/json")
  req.send(JSON.stringify(
    getFormData($("#userdataForm"))))

}

</script>
{% endblock javascripts %}  
